<!doctype html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Editar Pedido</title>
    <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- NECESARIO PARA RESPONSIVE -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="p-4">

<div class="container">
    <h2>Editar Pedido</h2>

    <form th:action="@{/pedidos/actualizar}" method="post" class="w-100">
        <input type="hidden" th:name="id" th:value="${pedido.id}" />

        <div class="mb-3">
            <label>Producto</label>
            <select name="productoId" class="form-select w-100" required>
                <option th:each="prod : ${productos}"
                        th:value="${prod.id}"
                        th:text="${prod.nombre}"
                        th:selected="${prod.id == pedido.producto.id}">
                </option>
            </select>
        </div>

        <div class="mb-3">
            <label>Cantidad</label>
            <input type="number" class="form-control w-100" name="cantidad"
                   th:value="${pedido.cantidad}" min="1" required>
        </div>

        <div class="mb-3">
            <label>Direcci√≥n</label>
            <input type="text" class="form-control w-100" name="direccion"
                   th:value="${pedido.direccion}" required>
        </div>

        <div class="mb-3">
            <label>Fecha de entrega</label>
            <input type="date" class="form-control w-100" name="fechaEntrega"
                   th:value="${pedido.fechaEntrega}" required>
        </div>

        <div class="mb-3" th:if="${userRole == 'ADMIN'}">
            <label>Estado</label>
            <select name="estado" class="form-select w-100">
                <option th:value="PENDIENTE" th:selected="${pedido.estado.name() == 'PENDIENTE'}">PENDIENTE</option>
                <option th:value="ENTREGADO" th:selected="${pedido.estado.name() == 'ENTREGADO'}">ENTREGADO</option>
                <option th:value="CANCELADO" th:selected="${pedido.estado.name() == 'CANCELADO'}">CANCELADO</option>
            </select>
        </div>

        <button class="btn btn-primary w-100 mb-2">Guardar Cambios</button>
        <a href="/pedidos/listar" class="btn btn-secondary w-100">Cancelar</a>
    </form>
</div>

<div th:replace="fragments/footer :: footer"></div>

</body>
</html>

